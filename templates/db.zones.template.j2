; {{ ansible_managed }}
{% import "./templates/records.j2" as records %}
$ttl {{ ZoneRecords.ttl|default( zones_config_ttl ) }}
$ORIGIN {{ item.name }}.
@     IN  SOA     {{ ZoneRecords.SOA.ns }}     {{ ZoneRecords.SOA.email }}  (
      {{ ZoneRecords.SOA.serial }}    ; serial
      {{ ZoneRecords.SOA.refresh|default( zones_config_refresh ) }}      ; refresh
      {{ ZoneRecords.SOA.retry|default( zones_config_retry ) }}      ; retry
      {{ ZoneRecords.SOA.expire|default( zones_config_expire ) }}      ; expire
      {{ ZoneRecords.SOA.negative|default( zones_config_negative ) }}      ; negative
      )

{{ records.NS(ZoneRecords.NS) }}
{% for record in bind_records -%}
  {% if ZoneRecords[record] is defined -%}
{{ records[record](ZoneRecords[record]) }}
  {%- endif %}
{%- endfor %}

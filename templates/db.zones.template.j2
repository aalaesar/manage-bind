;{ {{ ansible_managed }}

$ttl {{ records.ttl|default( recordss_config_ttl ) }}
$ORIGIN {{ item.name }}.
@           IN  SOA     {{ records.SOA.ns }}     {{ records.SOA.email }}  (
                {{ records.SOA.serial }}    ; serial
                {{ records.SOA.refresh|default( recordss_config_refresh ) }}      ; refresh
                {{ records.SOA.retry|default( recordss_config_retry ) }}      ; retry
                {{ records.SOA.expire|default( recordss_config_expire ) }}      ; expire
                {{ records.SOA.negative|default( recordss_config_negative ) }}      ; negative
                )
{% for nameserver in records.NS %}
@			IN	NS	{{ nameserver }}
{% endfor %}

{% if records.A is defined %}
{% for recordsv4 in records.A %}
{% if records.A[recordsv4] is string %}
{{ records.A[recordsv4] }}		IN	A	{{ recordsv4 }}
{% else %}
{% for host in records.A[recordsv4] %}
{{ host }}		IN	A	{{ recordsv4 }}
{% endfor %}
{% endif %}
{% endfor %}

{% endif %}
{% if records.AAAA is defined %}
{% for recordsv6 in records.AAAA %}
{% if records.AAAA[recordsv6] is string %}
{{ records.AAAA[recordsv6] }}		IN	AAAA	{{ recordsv6 }}
{% else %}
{% for host in records.AAAA[recordsv6] %}
{{ host }}		IN	AAAA	{{ recordsv6 }}
{% endfor %}
{% endif %}
{% endfor %}

{% endif %}
{% if records.PTR is defined %}
{% for ptr in records.PTR %}
{{ records.PTR[ptr] }}			IN	PTR	{{ ptr }}
{% endfor %}

{% endif %}
{% if records.MX is defined %}
{% for record in records.MX %}
{% for entry in records.MX[record] %}
{{ record }}		{{ entry.ttl|default('') }} IN	MX {{ entry.priority }}	{{ entry.target }}
{% endfor %}
{% endfor %}

{% endif %}
{% if records.SRV is defined %}
{% for record in records.SRV %}
{{ record.srvce }}.{{ record.prot }}{% if record.records_name is defined %}.{{ record.records_name }}{% endif %}	IN	SRV	{{ record.priority }} {{ record.weight }} {{ record.port }}	{{ record.target }}
{% endfor %}

{% endif %}
{% if records.CNAME is defined %}
{% for cname in records.CNAME %}
{% if records.CNAME[cname] is string %}
{{ cname }} 			IN	CNAME	{{ records.CNAME[cname] }}
{% else %}
{% for alias in records.CNAME[cname] %}
{{ alias }}			IN	CNAME	{{ cname }}
{% endfor %}
{% endif %}
{% endfor %}

{% endif %}
{% if records.DNAME is defined %}
{% for dname in records.DNAME %}
{{ dname }}			IN	DNAME	{{ records.DNAME[dname] }}
{% endfor %}

{% endif %}
{% if records.TXT is defined %}
{% for txt in records.TXT %}
{{ txt.label|default('@') }}			IN	TXT	{{ txt.text }}
{% endfor %}

{% endif %}
